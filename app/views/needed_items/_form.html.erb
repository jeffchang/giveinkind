<%= form_for @needed_item do |n| %>
  <%= javascript_include_tag :defaults %>
  <%= javascript_include_tag 'prototype' %>
  <% @subcategory = subcategory %>
  <% unless subcategory %>
    <%= collection_select(nil, :category_id, @categories, :id, :name, {:prompt => "Select a Category"}, {:onchange => "#{remote_function(:url => {:action => "update_subcategories"}, :with => "'category_id='+value")}"}) %>
  <% else %>    
    <%= collection_select(nil, :category_id, @categories, :id, :name, {:selected => subcategory.category}, {:prompt => "Select a Category"}, {:onchange => "#{remote_function(:url => {:action => "update_subcategories"}, :with => "'category_id='+value")}"}) %>
  <% end %>
  <br>
  <div id="subcategories"><%= render :partial => 'subcategories', :object => @subcategories %></div>
  <%= n.text_field :name, value: name %>
  <%= n.text_area :description, value: description, class: "tinymce" %>
  <%= tinymce %>
  <%= n.check_box :oversized, value: oversized %>
  <p></p>
  <%= n.submit %>
<% end %>